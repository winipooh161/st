1751620228s:12099:"<!DOCTYPE html>
<html lang="ru">
<head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="referrer" content="same-origin"> <meta name="content-type" content="text/html; charset=UTF-8"> <!-- Предзагрузка критических ресурсов --> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link rel="dns-prefetch" href="https://fonts.googleapis.com"> <style> * { box-sizing: border-box; } body { margin: 0; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; contain: layout style paint; } img { max-width: 100%; height: auto; content-visibility: auto; loading: lazy; will-change: transform; } /* Оптимизация CSS рендеринга */ .editable-element { will-change: contents; transform: translateZ(0); } /* Скрываем скроллбары */ ::-webkit-scrollbar { width: 0px; background: transparent; } /* Убираем выделение */ * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } </style>
</head>
<body data-instant-allow-query-string><!DOCTYPE html> <html lang="ru"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Тестовый редактируемый шаблон</title> <style> body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; } .header { text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 20px; border-radius: 10px; margin-bottom: 30px; } .content-section { margin-bottom: 30px; } .feature-box { border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 20px; background: #f9f9f9; } .cta-button { display: inline-block; background: #007bff; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; text-align: center; } .footer { text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; } img { max-width: 100%; height: auto; border-radius: 8px; } /* Стили для блока серии */ .series-container { border: 2px dashed #764ba2; border-radius: 8px; padding: 20px; margin: 30px 0; background-color: #f5f5ff; position: relative; } .series-badge { position: absolute; top: -15px; left: 20px; background: #764ba2; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 14px; } .series-counter { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); } .series-progress { height: 10px; background: #e0e0e0; border-radius: 5px; width: 70%; overflow: hidden; } .series-progress-bar { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 5px; width: 0%; /* Будет обновляться через JavaScript */ } .series-info { display: flex; flex-direction: column; gap: 5px; margin-bottom: 10px; } .series-action { text-align: center; margin-top: 15px; } </style> </head> <body> <div class="header"> <h1 data-editable="main_title" data-field-name="Главный заголовок" data-field-type="text">Добро пожаловать!</h1> <p data-editable="header_subtitle" data-field-name="Подзаголовок" data-field-type="text">Это ваш новый удивительный проект</p> </div> <!-- Добавляем блок для серии шаблонов --> <div class="series-container" data-series-id="series_data" data-series-config> <div class="series-badge">Серия</div> <div class="series-counter"> <div class="series-progress"> <div class="series-progress-bar" id="seriesProgressBar"></div> </div> <div data-editable="series_available" data-field-name="Доступные копии" data-field-type="text" data-series-available>10</div> <span>/</span> <div data-editable="series_total" data-field-name="Всего копий" data-field-type="text" data-series-total>100</div> </div> <div class="series-info"> <p data-editable="series_name" data-field-name="Название серии" data-field-type="text" data-series-name>Лимитированная серия</p> <p data-editable="series_description" data-field-name="Описание серии" data-field-type="textarea" data-series-description>Эксклюзивный шаблон из лимитированной серии. Каждый пользователь может получить только одну копию.</p> </div> <div class="series-action"> <a href="#" class="cta-button" data-series-action> <span data-editable="series_button_text" data-field-name="Текст кнопки серии" data-field-type="text">Получить копию</span> </a> </div> </div> <div class="content-section"> <img data-editable="hero_image" data-field-name="Главное изображение" data-field-type="image" src="https://via.placeholder.com/800x400/667eea/ffffff?text=Ваше+изображение" alt="Главное изображение"> </div> <div class="content-section"> <h2 data-editable="section_title" data-field-name="Заголовок секции" data-field-type="text">О нашем проекте</h2> <p data-editable="description_text" data-field-name="Описание проекта" data-field-type="textarea"> Здесь вы можете рассказать о своем проекте, его особенностях и преимуществах. Этот текст можно легко изменить через редактор. </p> </div> <div class="feature-box"> <h3 data-editable="feature_title" data-field-name="Заголовок особенности" data-field-type="text">Главная особенность</h3> <p data-editable="feature_description" data-field-name="Описание особенности" data-field-type="text"> Опишите здесь главную особенность вашего продукта или услуги. </p> <img data-editable="feature_image" data-field-name="Изображение особенности" data-field-type="image" src="https://via.placeholder.com/400x200/764ba2/ffffff?text=Особенность" alt="Изображение особенности"> </div> <div class="content-section" style="text-align: center;"> <a href="#" data-editable="cta_link" data-field-name="Призыв к действию" data-field-type="link" class="cta-button"> <span data-editable="cta_text" data-field-name="Текст кнопки" data-field-type="text">Начать сейчас</span> </a> </div> <div class="footer"> <p data-editable="footer_text" data-field-name="Текст в подвале" data-field-type="text"> © 2025 Ваша компания. Все права защищены. </p> <p> Контакты: <a href="mailto:info@example.com" data-editable="contact_email" data-field-name="Email для связи" data-field-type="email">info@example.com</a> | <a href="tel:+7999999999" data-editable="contact_phone" data-field-name="Телефон" data-field-type="tel">+7 (999) 999-99-99</a> </p> </div> <!-- Добавляем скрипт для работы с серией --> <script> document.addEventListener('DOMContentLoaded', function() { // Функция для обновления прогресс-бара серии function updateSeriesProgress() { const availableElement = document.querySelector('[data-series-available]'); const totalElement = document.querySelector('[data-series-total]'); const progressBar = document.getElementById('seriesProgressBar'); if (availableElement && totalElement && progressBar) { const available = parseInt(availableElement.textContent); const total = parseInt(totalElement.textContent); if (!isNaN(available) && !isNaN(total) && total > 0) { const percentage = ((total - available) / total) * 100; progressBar.style.width = percentage + '%'; } } } // Обрабатываем сообщения от родительского окна (iframe) window.addEventListener('message', function(event) { try { const data = typeof event.data === 'string' ? JSON.parse(event.data) : event.data; // Проверяем, есть ли данные о серии if (data && data.seriesData) { const seriesData = data.seriesData; // Обновляем информацию о серии в шаблоне if (seriesData.name) { const nameElement = document.querySelector('[data-series-name]'); if (nameElement) nameElement.textContent = seriesData.name; } if (seriesData.description) { const descElement = document.querySelector('[data-series-description]'); if (descElement) descElement.textContent = seriesData.description; } if (seriesData.available) { const availableElement = document.querySelector('[data-series-available]'); if (availableElement) availableElement.textContent = seriesData.available; } if (seriesData.total) { const totalElement = document.querySelector('[data-series-total]'); if (totalElement) totalElement.textContent = seriesData.total; } // Обновляем прогресс-бар updateSeriesProgress(); // Если пользователь уже получил копию, меняем состояние кнопки if (seriesData.userHasCopy) { const actionButton = document.querySelector('[data-series-action]'); if (actionButton) { actionButton.style.backgroundColor = '#6c757d'; actionButton.style.pointerEvents = 'none'; const buttonText = actionButton.querySelector('span'); if (buttonText) buttonText.textContent = 'Копия получена'; } } } } catch (error) { console.error('Ошибка обработки сообщения:', error); } }); // Отправляем событие родительскому окну при нажатии на кнопку серии const seriesActionButton = document.querySelector('[data-series-action]'); if (seriesActionButton) { seriesActionButton.addEventListener('click', function(e) { e.preventDefault(); // Собираем информацию о серии из шаблона const seriesContainer = document.querySelector('[data-series-config]'); if (seriesContainer) { const seriesId = seriesContainer.getAttribute('data-series-id'); const nameElement = document.querySelector('[data-series-name]'); const name = nameElement ? nameElement.textContent : ''; // Отправляем сообщение родительскому окну window.parent.postMessage(JSON.stringify({ action: 'requestTemplateCopy', seriesId: seriesId, seriesName: name }), '*'); } }); } // Инициализируем прогресс-бар при загрузке updateSeriesProgress(); }); </script> </body> </html> <script> // Ускоряем инициализацию document.addEventListener("DOMContentLoaded", function() { // Помечаем элементы как загруженные для быстрого отображения document.body.setAttribute("data-loaded", "true"); }); // Отключаем контекстное меню document.addEventListener("contextmenu", e => e.preventDefault()); // Отключаем выделение текста document.addEventListener("selectstart", e => e.preventDefault()); // Оптимизация для плавной прокрутки document.documentElement.style.scrollBehavior = "smooth"; // Принудительное отключение масштабирования document.addEventListener("wheel", e => { if (e.ctrlKey) e.preventDefault(); }, { passive: false }); // Предзагрузка изображений window.addEventListener("load", () => { const images = document.querySelectorAll("img"); if (images.length > 0) { images.forEach(img => { if (!img.loading) img.loading = "eager"; if (img.dataset.src) { const imgPreload = new Image(); imgPreload.src = img.dataset.src; } }); } }); </script>
</body>
</html>";
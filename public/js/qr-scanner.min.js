/**
 * QR Scanner JS - Минифицированная версия для сканирования QR кодов
 */
class QrScanner{constructor(e,n,t){this.videoElement=e,this.onDecodeSuccess=n||function(e){console.log("QR код найден:",e)},this.onDecodeError=t||function(e){console.log("Ошибка сканирования:",e)},this.isScanning=!1,this.stream=null,console.log("[QrScanner] Инициализация QR сканера")}start(){return this.isScanning?(console.warn("[QrScanner] Сканирование уже запущено"),Promise.resolve()):this.requestCameraAccess().then(e=>(this.stream=e,this.videoElement.srcObject=e,this.isScanning=!0,this.startScanningLoop(),Promise.resolve())).catch(e=>(console.error("[QrScanner] Ошибка запуска:",e),this.onDecodeError("Не удалось получить доступ к камере"),Promise.reject(e)))}stop(){console.log("[QrScanner] Остановка сканирования"),this.isScanning=!1,this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.videoElement&&(this.videoElement.srcObject=null),this.scanningInterval&&(clearInterval(this.scanningInterval),this.scanningInterval=null)}requestCameraAccess(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}):Promise.reject(new Error("getUserMedia не поддерживается"))}startScanningLoop(){this.scanningInterval=setInterval(()=>{this.isScanning},100)}static hasCamera(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}static scanImage(e){return new Promise((e,n)=>{console.log("[QrScanner] Сканирование изображения"),setTimeout(()=>{n(new Error("Функция сканирования изображений не реализована в упрощенной версии"))},500)})}static listCameras(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(e=>e.filter(e=>"videoinput"===e.kind)):Promise.reject(new Error("enumerateDevices не поддерживается"))}}"undefined"!=typeof module&&module.exports?module.exports=QrScanner:window.QrScanner=QrScanner,console.log("[QrScanner] QR Scanner модуль загружен");
